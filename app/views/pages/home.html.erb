<p><%= link_to 'Log in with Sparkwire', '/users/auth/sparkwire' %></p>

<div id="chart"></div>

<% content_for :bottom do %>
<script type="text/javascript">
google.load('visualization', '1.0', {'packages':['corechart']});
google.setOnLoadCallback(drawChart);
function drawChart() {

  // Create the data table.
  var data = google.visualization.arrayToDataTable(<%= @readings.to_json %>);
  // var data = google.visualization.arrayToDataTable([1,2,3]);

  // Set chart options
  var options = {'title':'Electricity usage',
                 'width':500,
                 'height':300};

  // Instantiate and draw our chart, passing in some options.
  var chart = new google.visualization.LineChart(document.getElementById('chart'));
  chart.draw(data, options);
}
</script>
<% end %>
